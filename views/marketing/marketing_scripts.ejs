<!-- views/marketing/marketing_scripts -->

<script>

    var options = {
        series: [1, 2, 3, 4, 5, 6, 2, 3, 4],
        chart: {
            type: 'pie',
        },
        plotOptions: {
            pie: {
                startAngle: 0,
                endAngle: 360
            }
        },
        dataLabels: {
            enabled: false, // Disable data labels inside the pie chart
        },
        fill: {
            type: 'gradient', // Use solid fill type
        },
        legend: {
            show: true,
            position: "left", // Set the legend position to "left"
            fontSize: '14px', // Increase legend font size as needed
            formatter: function (seriesName, opts) {
                // Here, you should use the correct variable to get the series value
                var seriesValue = opts.w.globals.series[opts.seriesIndex];
                var totalValue = opts.w.globals.series.reduce((acc, val) => acc + val, 0);
                var percentage = ((seriesValue / totalValue) * 100).toFixed(2); // Calculate and format the percentage
                return `${percentage}% ${seriesName}`; // Format legend label as "47.06% Pending"
            },
            labels: {
                useSeriesColors: false, // Use custom color
            },
        },
        labels: ["For Hauling", "For Receiving", "For Warehousing", "For Sorting", "For Treatment", "For Certification", "For Billing", "For Collection", "Finished"],
        colors:                 
            [
            "#FFC0CB", // Light Pink (forHaulingColor)
            "#FFDAB9", // Peachpuff (forSortingColor)
            "#FFB6C1", // Light Pink (forCollectionColor)
            "#FFE4B5", // Moccasin (forReceivingColor)
            "#AFEEEE", // Pale Turquoise (forWarehousingColor)
            "#D8BFD8", // Thistle (forCertificationColor)
            "#98FB98", // Pale Green (forTreatmentColor)
            "#B0C4DE", // Light Steel Blue (forBillingColor)
            "#C1FFC1"  // Pale Green (finishedColor)
            ], // Specify solid colors here
        responsive: [{
            breakpoint: 500,
            options: {
                chart: {
                    width: '100%',
                    maxHeight: '70%',
                },
            }
        }]
    };
    const pieChart = document.querySelector("#pieChart");
    while (pieChart.firstChild) {
        pieChart.removeChild(pieChart.firstChild);
    }
    var chart = new ApexCharts(pieChart, options);
    chart.render();

</script>