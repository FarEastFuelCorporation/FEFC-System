<!-- views/marketing/new_quotation.ejs -->

<div class="content">
    <div class="col-xs-12">
        <!-- client_list -->
        <section class="marketing" id="client_list_section">
            <h4>QUOTATIONS</h4><br>
            <div id="new_client_form_tab">
                <h5>NEW QUOTATION FORM</h5><br>
                <form  action="https://script.google.com/macros/s/AKfycbwTLM-nBKAsa_oRJrwGhfP8LQXohvfbOYN4SXr8Tv7lzvFn2LEl_SpFRgJmmRWW5MX9MQ/exec" method="post">
                    <input type="hidden" name="user" id="user">
                    <h6>QUOTATION DETAILS</h6>
                    <div style="display: flex; gap: 20px;">
                        <div>
                            <input type="radio" name="is_there_moa" id="with_moa" value="WITH MOA" checked>With MOA
                        </div>
                        <div>
                            <input type="radio" name="is_there_moa" id="without_moa" value="WITHOUT MOA">Without MOA
                        </div>
                    </div>
                    <div class="position-relative;">
                        <div style="display: grid; grid-template-columns: 12% 12% 15% 15% 15% 31%; gap: 15px; width: calc(100% - 75px);">
                            <div>
                                <label for="quotation_no">
                                    <i class="fa-solid fa-list-ol"></i>
                                    Quotation #
                                </label><br>
                                <input type="text" name="quotation_no" id="quotation_no" autocomplete="off" class="form-control" required placeholder="Type Quotation #">
                            </div>
                            <div>
                                <label for="revision_no">
                                    <i class="fa-solid fa-list-ol"></i>
                                    Revision #
                                </label><br>
                                <input type="text" name="revision_no" id="revision_no" autocomplete="off" class="form-control" required placeholder="Type Revision #">
                            </div>
                            <div id="validity_container">
                                <label for="terms">
                                    <i class="fa-solid fa-calendar-days"></i>
                                    MOA End Date
                                </label><br>
                                <input type="date" name="validity" id="validity" autocomplete="off" class="form-control" placeholder="Type Quotation #">
                            </div>
                            <div>
                                <label for="terms">
                                    <i class="fa-solid fa-calendar-days"></i>
                                    Terms Charge
                                </label><br>
                                <input type="text" name="terms" id="terms" autocomplete="off" class="form-control" required placeholder="Input Terms (Charge)">
                            </div>
                            <div>
                                <label for="terms2">
                                    <i class="fa-solid fa-calendar-days"></i>
                                    Terms Buying
                                </label><br>
                                <input type="text" name="terms2" id="terms2" autocomplete="off" class="form-control" required placeholder="Input Terms (Buying)">
                            </div>
                            <div>
                                <label for="client">
                                    <i class="fa-solid fa-user"></i>
                                    Client
                                </label><br>
                                <input type="text" name="client" id="client" autocomplete="off" class="form-control" required placeholder="Type to Search Client Name...">
                            </div>
                        </div><br>
                    </div><br>
                    <div class="position-relative">
                        <h6>QUOTATION WASTE DETAILS</h6>
                        <input type="hidden" id="list_counter" name="list_counter" value="1">
                        <div class="d-flex gap-2 position-absolute top-0 end-0" style="margin-top: -20px;">
                            <button type="button" id="remove_item_button" class="btn btn-danger">
                                <i class="fa-solid fa-minus"></i>
                            </button>
                            <button type="button" id="add_item_button" class="btn btn-success">
                                <i class="fa-solid fa-plus"></i>
                            </button>
                        </div>
                        <div id="item-container">
                            <div class="item" id="item_1" style="display: grid; grid-template-columns: 15% 25% 12% 10% 10% 12% 16%; gap: 15px; width: calc(100% - 90px);">
                                <div>
                                    <label for="waste_code1">
                                        <i class="fa-solid fa-list"></i>
                                        Waste Code
                                    </label><br>
                                    <input type="text" name="waste_code1" id="waste_code1" autocomplete="off" class="form-control" required placeholder="Search">
                                </div>
                                <div>
                                    <label for="waste_name1">
                                        <i class="fa-solid fa-trash-can"></i>
                                        Waste Name
                                    </label><br>
                                    <input type="text" name="waste_name1" id="waste_name1" autocomplete="off" class="form-control" required placeholder="Type Waste Name...">
                                </div>
                                <div>
                                    <label for="mode1">
                                        <i class="fa-solid fa-cart-shopping"></i>
                                        Mode
                                    </label><br>
                                    <select name="mode1" id="mode1" class="form-control" required>
                                        <option value="">SELECT</option>
                                        <option value="CHARGE">CHARGE</option>
                                        <option value="FREE OF CHARGE">FREE OF CHARGE</option>
                                        <option value="BUYING">BUYING</option>
                                        <option value="SELLING">SELLING</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="unit1">
                                        <i class="fa-solid fa-scale-balanced"></i>
                                        Unit
                                    </label><br>
                                    <select name="unit1" id="unit1" class="form-control" required>
                                        <option value="">SELECT</option>
                                        <option value="Pc">PIECES</option>
                                        <option value="Kg">KILOGRAMS</option>
                                        <option value="L">LITERS</option>
                                        <option value="DRUM">DRUM</option>
                                        <option value="LOT">LOT</option>
                                        <option value="TRIP">TRIP</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="unit_price1">
                                        <i class="fa-solid fa-money-bill-wave"></i>
                                        Unit Price
                                    </label><br>
                                    <input type="number" name="unit_price1" id="unit_price1" autocomplete="off" class="form-control" required value="0">
                                </div>
                                <div>
                                    <label for="vat_calculation1">
                                        <i class="fa-solid fa-calculator"></i>
                                        Vat Calculation
                                    </label><br>
                                    <select name="vat_calculation1" id="vat_calculation1" class="form-control" required>
                                        <option value="">SELECT</option>
                                        <option value="VAT INCLUSIVE">VAT INCLUSIVE</option>
                                        <option value="VAT EXCLUSIVE">VAT EXCLUSIVE</option>
                                        <option value="NON VATABLE">NON VATABLE</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="unit_price1">
                                        <i class="fa-solid fa-money-bill-wave"></i>
                                        Fix Price
                                    </label><br>
                                    <input type="number" name="unit_price1" id="unit_price1" autocomplete="off" class="form-control" required value="0">
                                </div>
                            </div>
                        </div><br>
                    </div><br>
                    <div style="position: relative; margin-top: 50px;">
                        <h6>QUOTATION TRANSPORTATION DETAILS</h6>
                        <div class="d-flex gap-2 position-absolute top-0 end-0" style="margin-top: -20px;">
                            <button type="button" id="tf_button" class="btn btn-danger">
                                Without Transportation Fee
                            </button>
                            <button type="button" id="remove_tf_button" class="btn btn-danger">
                                <i class="fa-solid fa-minus"></i>
                            </button>
                            <button type="button" id="add_tf_button" class="btn btn-success">
                                <i class="fa-solid fa-plus"></i>
                            </button>
                        </div>
                        <div id="tf-container">
                            <div class="tf-item" id="tf-item_1" style="display: grid; grid-template-columns: 15% 25% 12% 10% 10% 12% 16%; gap: 15px; width: calc(100% - 90px);">
                                <div>
                                    <label for="type_of_vehicle1">
                                        <i class="fa-solid fa-truck"></i>
                                        Type of Vehicle
                                    </label><br>
                                    <select name="type_of_vehicle1" id="type_of_vehicle1" class="form-control" required>
                                        <option value="">SELECT</option>
                                    </select>
                                </div>
                                <div>
                                    <label for="transportation_fee1">
                                        <i class="fa-solid fa-list"></i>
                                        Area of Hauling
                                    </label><br>
                                    <div class="search_input">
                                        <input type="text" name="transportation_fee1" id="transportation_fee1" autocomplete="off" class="form-control" required placeholder="Type Area of Hauling...">
                                    </div>
                                </div>
                                <div>
                                    <label for="tf_mode1">
                                        <i class="fa-solid fa-cart-shopping"></i>
                                        Mode
                                    </label><br>
                                    <div class="search_input">
                                        <select name="tf_mode1" id="tf_mode1" class="form-control" required>
                                            <option value="">SELECT</option>
                                            <option value="CHARGE">CHARGE</option>
                                            <option value="FREE OF CHARGE">FREE OF CHARGE</option>
                                        </select>
                                    </div>
                                </div>
                                <div>
                                    <label for="tf_unit1">
                                        <i class="fa-solid fa-scale-balanced"></i>
                                        Unit
                                    </label><br>
                                    <div class="search_input">
                                        <select name="tf_unit1" id="tf_unit1" class="form-control" required>
                                            <option value="">SELECT</option>
                                            <option value="TRIP">TRIP</option>
                                        </select>
                                    </div>
                                </div>
                                <div>
                                    <label for="tf_unit_price1">
                                        <i class="fa-solid fa-money-bill-wave"></i>
                                        Unit Price
                                    </label><br>
                                    <div class="search_input">
                                        <input type="number" name="tf_unit_price1" id="tf_unit_price1" autocomplete="off" class="form-control" required value="0">
                                    </div>
                                </div>
                                <div>
                                    <label for="tf_vat_calculation1">
                                        <i class="fa-solid fa-calculator"></i>
                                        Vat Calculation
                                    </label><br>
                                    <div class="search_input">
                                        <select name="tf_vat_calculation1" id="tf_vat_calculation1" class="form-control" required>
                                            <option value="">SELECT</option>
                                            <option value="VAT INCLUSIVE">VAT INCLUSIVE</option>
                                            <option value="VAT EXCLUSIVE">VAT EXCLUSIVE</option>
                                            <option value="NON VATABLE">NON VATABLE</option>
                                        </select>
                                    </div>
                                </div>
                                <div>
                                    <label for="max_capacity1">
                                        <i class="fa-solid fa-weight-scale"></i>
                                        Min. Weight/ Trip (Kg)
                                    </label><br>
                                    <div class="search_input">
                                        <input type="number" name="max_capacity1" id="max_capacity1" autocomplete="off" class="form-control" required value="0">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="d-flex gap-2" style="margin-top: 40px;">
                        <div class="container-fluid m-0 p-0">
                            <label for="scope_of_work">
                                <i class="fa-solid fa-list-ol"></i>
                                Scope of Work
                            </label><br>
                            <input type="text" name="scope_of_work" id="scope_of_work" autocomplete="off" class="form-control" required placeholder="Input Scope of Work">
                        </div>
                        <div class="container-fluid m-0 p-0">
                            <label for="remarks">
                                <i class="fa-solid fa-list-ol"></i>
                                Remarks
                            </label><br>
                            <input type="text" name="remarks" id="remarks" autocomplete="off" class="form-control" required placeholder="Input Remarks (Leave blank if none)">
                        </div>
                    </div>
                    <div class="buttons" style="margin-top: 20px;">
                        <button type="button" id="generate_button" class="btn btn-success">
                            Generate Quotation
                        </button>
                        <button type="button" onclick="convertToPDFandDownload()" id="convertToPDFandDownload_button" class="btn btn-success">
                            Download and Submit
                        </button>
                        <button type="button" onclick="convertToPDF()" id="convertToPDF_button"  class="btn btn-success">
                            Download
                        </button>
                        <button type="submit" id="submit_button"  class="btn btn-success">
                            Submit
                        </button>
                    </div><br>
                    <div class="what_to_print" id="what_to_print">
                        <img src="/images/letterhead.jpg" id="background-image" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 0;">
                        <div class="pdf_container">
                            <div d-flex>
                                <div class="client_copy">
                                    <h4 class="bold">CLIENT'S COPY</h4>
                                </div>
                                <div class="pdf_header">
                                    <h4 class="bold">QUOTATION</h4>
                                </div>
                                <div class="billing_number" style="display: flex; gap: 20px;">
                                    <div>
                                        <h4 class="italic">Quotation Number</h4>
                                        <h4 id="qlf_form_no_container" class="bold"></h4>
                                        <h4 class="italic">Date</h4>
                                        <h4 id="date_made_container" class="bold"></h4>
                                    </div>
                                    <div>
                                        <h4 class="italic">Revision Number</h4>
                                        <h4 id="revision_number_container" class="bold"></h4>
                                        <h4 class="italic">Valid Until</h4>
                                        <h4 id="valid_until_container" class="bold"></h4>
                                    </div>
                                </div>
                                <div class="customer_summary">
                                    <div class="customer">
                                        <div class="customer_header">
                                            <h3 class="bold">MAIN OFFICE ADDRESS</h3>
                                        </div>
                                        <div class="customer_detail">
                                            <h3 id="client_name_container" class="bold"></h3>
                                            <h4 id="address_container" style="font-size: 10px !important;"></h4>
                                            <h4 id="tin_id_container" style="font-size: 10px !important;"></h4>
                                            <h4 id="nature_of_business_container" style="font-size: 10px !important;"></h4>
                                            <div id="contact_number_container" style="display: none; font-size: 10px !important;">
                                                <h4>Contact #:</h4><h4 id="contact_number" style="padding-left: 5px;"></h4>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="account_summary">
                                        <div class="account_summary_header">
                                            <h3 class="bold">FIELD OFFICE ADDRESS</h3>
                                        </div>
                                        <div class="customer_detail">
                                            <h3 id="client_name_container2" class="bold"></h3>
                                            <h4 id="address_container2" style="font-size: 10px !important;"></h4>
                                            <h4 id="tin_id_container2" style="font-size: 10px !important;"></h4>
                                            <h4 id="nature_of_business_container2" style="font-size: 10px !important;"></h4>
                                            <div id="contact_number2_container" style="display: none; font-size: 10px !important;">
                                                <h4>Contact #:</h4><h4 id="contact_number2" style="padding-left: 5px;"></h4>
                                            </div>
                                        </div>
                                    </div>
                                </div><br><br>
                                <div class="scope">
                                    <h3 class="bold">SCOPE OF WORK</h3>
                                </div>
                                <div class="scope_detail">
                                    <h3 id="scope_of_work_input"></h3>
                                </div>
                                <div class="account_details">
                                    <div class="account_details_header">
                                        <h3><b>DETAILS</b></h3>
                                    </div>
                                    <table class="account_details_detail">
                                        <thead>
                                            <tr>
                                                <th>Item</th>
                                                <th>Description</th>
                                                <th>Qty.</th>
                                                <th>Unit</th>
                                                <th>Unit Price</th>
                                                <th>Amount</th>
                                                <th>Mode </th>
                                                <th>Vat</th>
                                            </tr>
                                        </thead>
                                        <tbody id="table_data">
                                            <tr>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                            <tr>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                                <td></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                                <div id="remarks_container" style="display: flex; gap: 5px;">
                                    <h3 class="bold">REMARKS:</h3><h3 id="remarks_input" style="font-size: 12px;"></h3>
                                </div>
                                <div class="details" style="display: grid; grid-template-columns: 1fr 2fr;">
                                    <div style="border: 1px solid black; padding: 5px;">
                                        <h3 class="bold">QUOTATION VALIDITY:</h3>
                                        <div style="display: flex; justify-content: center; align-items: center; height: 40px; border-top: 1px solid black;">
                                            <h3 id="validity_input" class="bold">30 DAYS</h3>
                                        </div>
                                    </div>
                                    <div style="border: 1px solid black; padding: 5px;">
                                        <h3 class="bold">TERMS OF PAYMENT</h3>
                                        <div style="display: grid; grid-template-columns: 1fr 1fr; border-top: 1px solid black;">
                                            <div style="display: flex; flex-direction: column;">
                                                CHARGE: 
                                                <h3 id="charge_input" class="bold text-center"></h3>
                                            </div>
                                            <div style="display: flex; flex-direction: column; border-left: 1px solid black; padding-left: 5px; height: 40PX;">
                                                BUYING; 
                                                <h3 id="buying_input" class="bold text-center"></h3>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="other_details">
                                    <div style="border-bottom: 2px solid black;">
                                        <h3 class="bold text-center">REQUIREMENTS</h3>
                                    </div>
                                    <div style="padding: 5px;">
                                        <h3>1. Memorandum of Agreement, VAT Exemption Certificate (if applicable)</h3>
                                        <h3>2. Copy of BIR Form 2303 and 2307</h3>
                                    </div>
                                </div>
                                <% 
                                // Function to convert a string to proper case
                                function toProperCase(str) {
                                    return str.replace(/\w\S*/g, function(txt) {
                                        return txt.charAt(0).toUpperCase() + txt.substr(1).toLowerCase();
                                    });
                                }

                                // Apply the function to the employee's first and last names
                                const properFirstName = toProperCase(employee.firstName);
                                const properLastName = toProperCase(employee.lastName);
                                %>
                                <div class="footer">
                                    <div>
                                        <div class="footer_header">
                                            <h3>Prepared By:</h3>
                                        </div>
                                        <div class="assignatory">
                                            <div>
                                                <div class="signature" id="marketing_signature"></div>
                                                <h3 class="bold"><u id="marketing_user"><%= properFirstName %> <%= properLastName %></u></h3>
                                            </div>
                                            <div>
                                                <h4>Marketing Staff / CSR</h4>
                                            </div>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="footer_header">
                                            <h3>Checked By:</h3>
                                        </div>
                                        <div class="assignatory">
                                            <div>
                                                <div class="signature" id="accounting_head_signature"></div>
                                                <h3 class="bold"><u>Daisy Cardinez</u></h3>
                                            </div>
                                            <div>
                                                <h4>Accounting Manager</h4>
                                            </div>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="footer_header">
                                            <h3>Approved By:</h3>
                                        </div>
                                        <div class="assignatory">
                                            <div>
                                                <div class="signature" id="vice_president_signature"></div>
                                                <h3 class="bold"><u>Exequiel B. De Vera</u></h3>
                                            </div>
                                            <div>
                                                <h4>Vice-President</h4>
                                            </div>
                                        </div>
                                    </div>
                                    <div>
                                        <div class="footer_header">
                                            <h3>Conformed By:</h3>
                                        </div>
                                        <div class="assignatory">
                                        </div>
                                    </div>
                                </div>`
                            </div>
                        </div>
                        <style>
                            #what_to_print 
                            {
                                padding: 123px 38px 38px 76px;
                                position: relative;
                                background-size: cover;
                                width: 816px;
                                height: 1056px;
                                border: 3px solid black;
                                background-color: white;
                                /* display: none; */
                            }
        
                            #what_to_print .pdf_container
                            {
                                position: relative;
                                height: 889px;
                            }
        
                            #what_to_print h1
                            {
                                font-size: 18px;
                                margin: 0;
                            }
        
                            #what_to_print h2
                            {
                                font-size: 16px;
                                margin: 0;
                            }
        
                            #what_to_print h3
                            {
                                font-size: 14px;
                                margin: 0;
                            }
        
                            #what_to_print h4
                            {
                                font-size: 12px;
                                margin: 0;
                            }
        
                            #what_to_print h5
                            {
                                font-size: 10px;
                                margin: 0;
                            }
        
                            #what_to_print .amount
                            {
                                text-align: end;
                            }
        
                            #what_to_print .none
                            {
                            color: white;
                            }
        
                            #what_to_print .bold
                            {
                            font-weight: bold;
                            }
        
                            #what_to_print .italic
                            {
                            font-style: italic;
                            }
        
                            #what_to_print .grid2
                            {
                                display: grid;
                                grid-template-columns: 2fr 1fr;
                            }
        
                            #what_to_print .grid3
                            {
                                display: grid;
                                grid-template-columns: 1fr 1fr;
                            }
        
                            #what_to_print .client_copy
                            {
                                position: absolute;
                                top: 0;
                                left: 0;
                                width: 227px;
                                height: 30px;
                                border: 2px solid black;
                                font-size: 12px;
                                font-weight: bold;
                                display: flex;
                                justify-content: center;
                                align-items: center;
                            }
        
                            #what_to_print .billing_number
                            {
                                position: absolute;
                                top: 0;
                                right: 0;
                                width: 200px;
                                text-align: center;
                            }
        
                            #what_to_print .pdf_header
                            {
                                position: absolute;
                                top: 0;
                                left: 50%;
                                transform: translateX(-50%);
                                width: calc(100% - 312px);
                                text-align: center;
                            }
        
                            #what_to_print .customer_summary
                            {
                                position: absolute;
                                top: 91px;
                                left: 0;
                                width: 100%;
                                display: flex;
                                align-items: start;
                                justify-content: start;
                                border: 2px solid black ;
                            }
        
                            #what_to_print .customer
                            {
                                width: 50%;
                                display: flex;
                                flex-direction: column;
                            }
        
                            #what_to_print .account_summary
                            {
                                width: 50%;
                                display: flex;
                                flex-direction: column;
                                border-left: 2px solid black ;
                                height: 112px;
                            }
        
                            #what_to_print .customer_header,
                            #what_to_print .account_summary_header
                            {
                                text-align: center;
                                border-bottom: 1px solid black;
                                background-color: lightgray;
                            }
        
                            #what_to_print .customer_detail
                            {
                                padding: 5px;
                            }
        
                            #what_to_print .account_summary_detail
                            {
                                padding: 5px 20px;
                            }
        
                            #what_to_print .scope
                            {
                                position: absolute;
                                top: 205px;
                                left: 0;
                                width: 100%;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                border: 2px solid black ;
                            }
        
                            #what_to_print .scope_detail
                            {
                                position: absolute;
                                top: 224px;
                                left: 0;
                                width: 100%;
                                display: flex;
                                align-items: center;
                                justify-content: start;
                                border: 2px solid black ;
                                padding-left: 5px;
                            }
        
                            #what_to_print .payable
                            {
                                border-bottom: 2px solid black;
                            }
        
                            #what_to_print .account_details
                            {
                                position: absolute;
                                top: 242px;
                                width: 100%;
                                display: flex;
                                flex-direction: column;
                                border: 1px solid black ;
                                max-height: 400px;
                                overflow: hidden;
                                border-bottom: 2px solid black;
                            }
        
        
                            #what_to_print .account_details_header
                            {
                                width: 100%;
                                text-align: center;
                                border-top: 2px solid black;
                                border-bottom: 2px solid black;
                                border-left: 1px solid black;
                                border-right: 1px solid black;
                                background-color: lightgray;
                            }
        
                            #what_to_print .account_details_detail
                            {
                                width: 100%;
                                height: 425px;
                                position: relative;
                            }
        
                            #what_to_print .account_details_detail thead
                            {
                                overflow: hidden;
                                font-size: 12px !important;
                            }
        
                            #what_to_print .account_details_detail tbody
                            {
                                overflow: hidden;
                                font-size: 11px !important;
                            }
        
                            #what_to_print .account_details_detail thead tr,
                            #what_to_print .account_details_detail tbody tr
                            {
                                width: 100%;
                                display: grid;
                                grid-template-columns: .5fr 4fr .5fr 1fr 1fr 1fr 1.5fr 1.5fr !important;
                            }
        
                            #what_to_print .account_details_detail th,
                            #what_to_print .account_details_detail td
                            {
                                width: 100% !important;
                                border-left: 1px solid black;
                                border-right: 1px solid black;
                                text-align: center !important;
                                display: flex;
                                align-items: center !important;
                                justify-content: center ;
                            }
        
                            #what_to_print .account_details_detail tr
                            {
                                width: 100%;
                                height: 18px;
                                border-bottom: 1px solid black;
                                text-align: center;
                            }
        
                            #what_to_print #remarks_container
                            {
                                position: absolute;
                                top: 641px;
                                width: 100%;
                                height: 18px;
                                border: 2px solid black ;
                                overflow: hidden;
                                font-size: 14px;
                            }
        
                            #what_to_print .details
                            {
                                position: absolute;
                                top: 661px;
                                width: 100%;
                                height: 70px;
                                display: grid;
                                grid-template-columns: 13fr 2fr 2fr;
                                border: 1px solid black ;
                                overflow: hidden;
                                font-size: 14px;
                            }
        
                            #what_to_print .other_details
                            {
                                position: absolute;
                                top: 730px;
                                width: 100%;
                                height: 65px;
                                border: 2px solid black !important;
                                overflow: hidden;
                                font-size: 14px;
                            }
                                
                            #what_to_print .footer
                            {
                                margin-top: 750px;
                                display: grid;
                                grid-template-columns: 1fr 1fr 1fr 1fr;
                                border: 1px solid black ;
                            }
        
                            #what_to_print .signature
                            {
                                position: relative;
                                display: flex;
                                justify-content: center;
                                align-items: center;
                            }
                            #what_to_print .signature img
                            {
                                position: absolute;
                                width: 100px;
                            }
                                
                            #what_to_print .footer > div
                            {
                                display: flex;
                                flex-direction: column;
                                text-align: center;
                            }
                                
                            #what_to_print .footer_header
                            {
                                background-color: lightgray;
                                border: 1px solid black ;
                            }
        
                            #what_to_print .assignatory
                            {
                                display: flex;
                                flex-direction: column;
                                justify-content: end;
                                height: 60px;
                                border: 1px solid black ;
                            }
        
                        </style>
                    </div><br>   
                </form>
            </div>
        </section>
    </div>
</div>
<script>
    // Get radio buttons and the MOA End Date input
    const withMOARadio = document.getElementById('with_moa');
    const withoutMOARadio = document.getElementById('without_moa');
    const validityInput = document.getElementById('validity');

    // Function to enable or disable the MOA End Date input
    function toggleValidityInput() {
        validityInput.disabled = withoutMOARadio.checked;
    }

    // Attach the function to the change event of the radio buttons
    withMOARadio.addEventListener('change', toggleValidityInput);
    withoutMOARadio.addEventListener('change', toggleValidityInput);

    // Initial setup based on the default checked radio button
    toggleValidityInput();

    // Counter for item index
    let itemIndex = 1;

    // Function to add a new set of input fields
    function addItem() {
        itemIndex++;
        const newItem = document.getElementById('item_1').cloneNode(true);
        newItem.id = `item_${itemIndex}`;

        // Update the IDs and names based on the index
        newItem.querySelectorAll('[id^="waste_code"]').forEach((element) => {
            element.id = element.id.replace(/(\d+)/, itemIndex);
        });

        newItem.querySelectorAll('[name^="waste_code"]').forEach((element) => {
            element.name = element.name.replace(/(\d+)/, itemIndex);
        });

        // Append the new item to the container
        document.getElementById('item-container').appendChild(newItem);
    }

    // Function to remove the last set of input fields
    function removeItem() {
        const container = document.getElementById('item-container');
        const items = container.getElementsByClassName('item');

        // Ensure there's at least one item before removing
        if (items.length > 1) {
            container.removeChild(items[items.length - 1]);
            itemIndex--;
        }
    }

    // Add event listeners to the buttons
    document.getElementById('add_item_button').addEventListener('click', addItem);
    document.getElementById('remove_item_button').addEventListener('click', removeItem);

     // Counter for transportation fee index
    let tfIndex = 1;

    // Function to add a new set of transportation fee input fields
    function addTFItem() {
        tfIndex++;
        const container = document.getElementById('tf-container');
        const originalTFItem = document.getElementById('tf-item_1');
        const newTFItem = originalTFItem.cloneNode(true);

        // Update the IDs and names based on the index
        newTFItem.id = `tf-item_${tfIndex}`;

        newTFItem.querySelectorAll('[id^="type_of_vehicle"]').forEach((element) => {
            element.id = element.id.replace(/(\d+)/, tfIndex);
        });

        newTFItem.querySelectorAll('[name^="type_of_vehicle"]').forEach((element) => {
            element.name = element.name.replace(/(\d+)/, tfIndex);
        });

        // Append the new transportation fee item to the container
        container.appendChild(newTFItem);
    }

    // Function to remove the last set of transportation fee input fields
    function removeTFItem() {
        const container = document.getElementById('tf-container');
        const tfItems = container.getElementsByClassName('tf-item');

        // Ensure there's at least one transportation fee item before removing
        if (tfItems.length > 1) {
            container.removeChild(tfItems[tfItems.length - 1]);
            tfIndex--;
        }
    }

    // Add event listeners to the buttons
    document.getElementById('add_tf_button').addEventListener('click', addTFItem);
    document.getElementById('remove_tf_button').addEventListener('click', removeTFItem);
</script>